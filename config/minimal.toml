# CrabCache Minimal Configuration

# Server settings
bind_addr = "0.0.0.0"
port = 8000

# Shard configuration
max_memory_per_shard = 1073741824  # 1GB

# Persistence settings
enable_wal = false
wal_dir = "./data/wal"

# WAL configuration
[wal]
enabled = false
dir = "./data/wal"
sync_policy = "async"
sync_interval_ms = 1000
max_segment_size = 67108864
buffer_size = 4096
flush_interval_ms = 1000
enable_compression = false
compression_level = 1

# Metrics configuration
[metrics]
enabled = true
path = "/metrics"
port = 9090

# Security configuration
[security]
enable_auth = false
allowed_ips = []
enable_tls = false
max_command_size = 1048576

# Rate limiting configuration
[rate_limiting]
enabled = false
max_requests_per_second = 1000
burst_capacity = 100
window_seconds = 1

# Connection configuration
[connection]
max_connections = 1000
connection_timeout_seconds = 30
keepalive_timeout_seconds = 300
tcp_nodelay = true
tcp_recv_buffer_size = 65536
tcp_send_buffer_size = 65536
timeout_seconds = 30
keepalive = true

# Pipeline configuration
[connection.pipeline]
enabled = true
max_batch_size = 16
batch_timeout_ms = 10
buffer_size = 16384
timeout_ms = 100

# Logging configuration
[logging]
level = "info"
format = "json"
enable_file = false
file_enabled = false
file_path = "./logs/crabcache.log"
max_file_size_mb = 100
max_files = 10

# Eviction configuration
[eviction]
enabled = true
window_ratio = 0.01
sketch_width = 1024
sketch_depth = 4
memory_high_watermark = 0.8
memory_low_watermark = 0.6
reset_interval_secs = 3600
max_capacity = 10000
eviction_strategy = "gradual"
batch_eviction_size = 100
min_items_threshold = 10
admission_threshold_multiplier = 1.0
adaptive_eviction = true